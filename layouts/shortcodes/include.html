<!-- https://me.micahrl.com/blog/hugo-shortcode-importcode/ -->
{{- $language := (or (.Get "lang") "") -}}
{{- $options := (or (.Get "opts") "") -}}
{{- $filename := .Get "file" -}}
{{- $start := .Get "start" -}}
{{- $end := .Get "end" -}}

{{ if and $start $end  }}
   {{- $extra := cond (not (not $options)) "," "" -}}
   {{- $options = (print $options $extra "linenostart=" $start) -}}
{{ end }}
{{- $file := partial "utils/readfile.html" (dict "file" $filename "start" $start "end" $end) -}}
{{- highlight $file $language $options -}}